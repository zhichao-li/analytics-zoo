cmake_minimum_required(VERSION 3.1 FATAL_ERROR)
project(pytorch-engine)

find_package(Torch REQUIRED)

include_directories(/opt/work/jdk1.8.0_65//include
                   /opt/work/jdk1.8.0_65//include/linux
                   /opt/work/analytics-zoo/zoo/src/main/java/com/intel/analytics/zoo/pytorch/native/
                   )

add_library(pytorch-engine SHARED 
#com_intel_analytics_zoo_pytorch_PytorchModel.h
com_intel_analytics_zoo_pytorch_PytorchModel.cpp
)

target_link_libraries(pytorch-engine  ${TORCH_LIBRARIES})
#target_link_libraries(pytorch-engine  torchengine)

install(TARGETS pytorch-engine DESTINATION lib)
install(FILES com_intel_analytics_zoo_pytorch_PytorchModel.h  DESTINATION include)
set_property(TARGET pytorch-engine PROPERTY CXX_STANDARD 11)

# cmake -DCMAKE_PREFIX_PATH=/home/lizhichao/bin/libtorch/libtorch  ..
